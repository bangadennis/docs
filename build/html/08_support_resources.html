

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Metadata resources &mdash; Supply Chain 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="top" title="Supply Chain 0.1 documentation" href="index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Supply Chain 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Metadata resources</a><ul>
<li><a class="reference internal" href="#contact-types">Contact Types</a></li>
<li><a class="reference internal" href="#towns">Towns</a></li>
<li><a class="reference internal" href="#administrative-units">Administrative units</a><ul>
<li><a class="reference internal" href="#counties">Counties</a></li>
<li><a class="reference internal" href="#constituencies">Constituencies</a></li>
<li><a class="reference internal" href="#wards">Wards</a></li>
</ul>
</li>
<li><a class="reference internal" href="#facility-types">Facility Types</a></li>
<li><a class="reference internal" href="#facility-owners-and-owner-types">Facility owners and owner types</a><ul>
<li><a class="reference internal" href="#facility-owner-types">Facility owner types</a></li>
<li><a class="reference internal" href="#facility-owners">Facility owners</a></li>
</ul>
</li>
<li><a class="reference internal" href="#job-titles">Job titles</a></li>
<li><a class="reference internal" href="#regulating-bodies">Regulating bodies</a><ul>
<li><a class="reference internal" href="#regulating-body-contacts">Regulating body contacts</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/08_support_resources.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="metadata-resources">
<h1>Metadata resources<a class="headerlink" href="#metadata-resources" title="Permalink to this headline">¶</a></h1>
<p>This chapter assumes that the reader is familiar with the general
principles explained in the <a class="reference internal" href="06_api.html"><em>Using the API - basic principles</em></a> chapter.</p>
<p>The MFL&#8217;s job description is to standardize the management of information
relating to facilities ( including community health units ), provide a standard
catalogue of available healthcare <a class="reference internal" href="09_services.html"><em>The service catalog</em></a> and act as a central ingress
point for regulation. However, in order to do this, the MFL needs to have a
constellation of support resources in its data model.</p>
<p>This chapter concerns itself with the resources that hold &#8220;setup&#8221; type
information. These resources wil often be used to populate drop-downs
and other types of choosers in the web / mobile front-ends.</p>
<div class="section" id="contact-types">
<h2>Contact Types<a class="headerlink" href="#contact-types" title="Permalink to this headline">¶</a></h2>
<p>The contact type resource allows us to move the configuration of contact types
that are recognized by the server from code to configuration.</p>
<p>This API will typically be used by web front-ends that need to populate
contact type selection dropdowns during the creation of contacts/</p>
<p>The contact type list endpoint is at <code class="docutils literal"><span class="pre">/api/common/contact_types/</span></code> while the
detail endpoint will be at <code class="docutils literal"><span class="pre">/api/common/contact_types/&lt;pk&gt;/</span></code> ( for example,
the contact whose id is <code class="docutils literal"><span class="pre">3a05b4e7-fb8e-4c23-ac95-4e36ac2b99fa</span></code> can be
retrieved by <code class="docutils literal"><span class="pre">GET``ting</span>
<span class="pre">``/api/common/contact_types/3a05b4e7-fb8e-4c23-ac95-4e36ac2b99fa/</span></code> ).</p>
<p>When creating a new contact, the only necessary fields are the <code class="docutils literal"><span class="pre">name</span></code> and
<code class="docutils literal"><span class="pre">description</span></code>. The following is a valid <code class="docutils literal"><span class="pre">POST</span></code> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KONTACT TYPE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Documentation Example&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="towns">
<h2>Towns<a class="headerlink" href="#towns" title="Permalink to this headline">¶</a></h2>
<p>The town resource allows us to set up the system&#8217;s list of towns.</p>
<p>This API will typically be used by front-ends that need to populate town
selection dropdowns during the creation of facility records.</p>
<p>The town list endpoint is at <code class="docutils literal"><span class="pre">/api/common/towns/</span></code>. As with every other
resource in this API, the detail endpoint will be at <code class="docutils literal"><span class="pre">/api/common/towns/</span></code>
e.g <code class="docutils literal"><span class="pre">/api/common/towns/e8f369f1-d115-43a1-a19b-ae40b7b4b19e/</span></code> for a town
whose primary key is <code class="docutils literal"><span class="pre">e8f369f1-d115-43a1-a19b-ae40b7b4b19e</span></code>.</p>
<p>When creating a new town, the only mandatory parameter is the <code class="docutils literal"><span class="pre">name</span></code>. The
following is a valid <code class="docutils literal"><span class="pre">POST</span></code> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Documentation Town&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="administrative-units">
<h2>Administrative units<a class="headerlink" href="#administrative-units" title="Permalink to this headline">¶</a></h2>
<p>The second generation MFL implements the post 2010 ( Kenyan ) constitution
administrative structure. This structure has only three levels, after the
national one: counties, constituencies and wards.</p>
<p>There are 47 counties. Each county contains a number of constituencies - all
adding up to 290. Each constituency in turn contains a number of wards - all
adding up to 1450.</p>
<p>The constituencies will sometimes be referred to as &#8220;sub-counties&#8221;. The wards
often - ut not always - correspond to locations in the previous administrative
structure.</p>
<p>It is unlikely that an API client will need to alter the administrative unit
setup data ( it is part of the server&#8217;s default data ). API support for
editing has still been supplied - as a failsafe mechanism.</p>
<div class="section" id="counties">
<h3>Counties<a class="headerlink" href="#counties" title="Permalink to this headline">¶</a></h3>
<p>Counties can be listed by visiting <code class="docutils literal"><span class="pre">/api/common/counties/</span></code>. Individual county
details can be listed by visiting <code class="docutils literal"><span class="pre">/api/common/counties/&lt;pk&gt;/</span></code> e.g
<code class="docutils literal"><span class="pre">/api/common/counties/dd999449-d36b-47f2-a958-1f5bb52951d4/</span></code> for a county
whose <code class="docutils literal"><span class="pre">id</span></code> is <code class="docutils literal"><span class="pre">dd999449-d36b-47f2-a958-1f5bb52951d4</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The county detail endpoint is atypical.</p>
<p>It embeds a geographic feature ( GeoJSON ) under the <code class="docutils literal"><span class="pre">county_boundary</span></code>
key and the coordinates of all facilities ( as a map of GeoJSON points )
in the county under the key <code class="docutils literal"><span class="pre">facility_coordinates</span></code>.</p>
<p class="last">This API provides all the raw information that is needed to render a map
of the county and plot the facilities on that map.</p>
</div>
</div>
<div class="section" id="constituencies">
<h3>Constituencies<a class="headerlink" href="#constituencies" title="Permalink to this headline">¶</a></h3>
<p>Constituencies can be listed by visiting <code class="docutils literal"><span class="pre">/api/common/constituencies/</span></code>.
Individual constituency details can be viewed by visiting
<code class="docutils literal"><span class="pre">/api/common/constituencies/&lt;pk&gt;/</span></code> e.g
<code class="docutils literal"><span class="pre">/api/common/constituencies/16da4d8a-4bff-448b-8fbb-0f64ee82c05a/</span></code> for the
constituency with an <code class="docutils literal"><span class="pre">id</span></code> <code class="docutils literal"><span class="pre">16da4d8a-4bff-448b-8fbb-0f64ee82c05a</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Like the county detail endpoint, the constituency detail endpoint is
atypical. It embeds the same coordinates and boundary information.</p>
</div>
</div>
<div class="section" id="wards">
<h3>Wards<a class="headerlink" href="#wards" title="Permalink to this headline">¶</a></h3>
<p>Wards can be listed by visiting <code class="docutils literal"><span class="pre">/api/common/wards/</span></code>. Individual ward details
can be retrieved at <code class="docutils literal"><span class="pre">/api/common/wards/&lt;pk&gt;/</span></code> e.g <code class="docutils literal"><span class="pre">/api/common/wards/41ae635c-5dba-40af-bb74-37d8d0a4c175/</span></code> for the ward with an <code class="docutils literal"><span class="pre">id</span></code>
<code class="docutils literal"><span class="pre">41ae635c-5dba-40af-bb74-37d8d0a4c175</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Like the county and constituency detail endpoints, the ward detail
endpoint is atypical because it embeds coordinates and boundary
information.</p>
</div>
</div>
</div>
<div class="section" id="facility-types">
<h2>Facility Types<a class="headerlink" href="#facility-types" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this resource is to populate dropdowns used in facility creation
and edit screens. The API also supports the creation of an administrative
interface that can be used to add new facility types and retire old ones.</p>
<p>Facility types can be listed at <code class="docutils literal"><span class="pre">/api/facilities/facility_types/</span></code>. Individual
facility details can be listed at <code class="docutils literal"><span class="pre">/api/facilities/facility_types/&lt;pk&gt;/</span></code> e.g
<code class="docutils literal"><span class="pre">/api/facilities/facility_types/ccf14e50-2606-40b9-96fd-0dc5b3ed4a15/</span></code> for
the facility whose <code class="docutils literal"><span class="pre">id</span></code> is <code class="docutils literal"><span class="pre">ccf14e50-2606-40b9-96fd-0dc5b3ed4a15</span></code>.</p>
<p>The only required fields when creating a new facility type are <code class="docutils literal"><span class="pre">name</span></code>
( which should be set to something meaningful ) and <code class="docutils literal"><span class="pre">sub_division</span></code> ( which
can be null ). The following is a minimal but valid <code class="docutils literal"><span class="pre">POST</span></code> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Test facility type for docs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="facility-owners-and-owner-types">
<h2>Facility owners and owner types<a class="headerlink" href="#facility-owners-and-owner-types" title="Permalink to this headline">¶</a></h2>
<p>Facility owner types provide a mechanism by which the owners of facilities
can be classified, arbitrarily. Examples are &#8220;Non Governmental Organizations&#8221;,
&#8220;Faith Based Organizations&#8221; and the &#8220;Ministry of Health&#8221;. These owner types
can be changed at will.</p>
<p>In the MFL 1 era, facility owners were set up in a very general manner e.g
&#8220;Private Enterprise (Institution)&#8221; and &#8220;Private Practice - Unspecified&#8221;. There
is no technical reason why these facility owners cannot be more specific e.g
names of specific private sector organizations.</p>
<div class="section" id="facility-owner-types">
<h3>Facility owner types<a class="headerlink" href="#facility-owner-types" title="Permalink to this headline">¶</a></h3>
<p>Facility owner types can be listed at <code class="docutils literal"><span class="pre">/api/facilities/owner_types/</span></code>.
Predictably, the detailed representations will be found at
<code class="docutils literal"><span class="pre">7ce5a7b1-9a5e-476c-a01c-8f52c4233926</span></code>.</p>
<p>When creating a new facility owner type, the only mandatory field is the
<code class="docutils literal"><span class="pre">name</span></code>. For example: the following is a perfectly valid <code class="docutils literal"><span class="pre">POST</span></code> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Owner type for docs&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="facility-owners">
<h3>Facility owners<a class="headerlink" href="#facility-owners" title="Permalink to this headline">¶</a></h3>
<p>Facility owners can be listed at <code class="docutils literal"><span class="pre">/api/facilities/owners/</span></code>. Detail
representations can be obtained from <code class="docutils literal"><span class="pre">/api/facilities/owners/&lt;pk&gt;/</span></code>
e.g <code class="docutils literal"><span class="pre">/api/facilities/owners/f770a132-f62a-418a-96b4-062c3cc7860c/</span></code>.</p>
<p>When registering a new facility owner, the <code class="docutils literal"><span class="pre">POST</span></code> payload should contain
at least the <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">description</span></code> and <code class="docutils literal"><span class="pre">abbreviation</span></code>. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Imaginary BigCorp.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;BigCorp owns everything&quot;</span><span class="p">,</span>
    <span class="s2">&quot;abbreviation&quot;</span><span class="o">:</span> <span class="s2">&quot;BIG&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The setup of owners and owner types should be performed with care, because
of the importance of this metadata in analysis / reporting.</p>
</div>
</div>
</div>
<div class="section" id="job-titles">
<h2>Job titles<a class="headerlink" href="#job-titles" title="Permalink to this headline">¶</a></h2>
<p>The job titles that are available to be assigned to facility officers can be
listed at <code class="docutils literal"><span class="pre">/api/facilities/job_titles/</span></code>. Individual job title detail
resources will be at <code class="docutils literal"><span class="pre">/api/facilities/job_titles/&lt;pk&gt;</span></code> e.g
<code class="docutils literal"><span class="pre">/api/facilities/job_titles/7ec51365-75b7-45e5-873b-8bb3c97bbe21</span></code>.</p>
<p>When creating a new job title, the <code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">description</span></code> should be sent
as a <code class="docutils literal"><span class="pre">POST</span></code> payload to the list endpoint. The example below is a valid
payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Boss&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Big Cahunna&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="regulating-bodies">
<h2>Regulating bodies<a class="headerlink" href="#regulating-bodies" title="Permalink to this headline">¶</a></h2>
<p>The regulators that are known to the server can be listed by <code class="docutils literal"><span class="pre">GET``ting</span>
<span class="pre">``/api/facilities/regulating_bodies/</span></code>. Predictaby, the detail of each can
be retrieved at <code class="docutils literal"><span class="pre">/api/facilities/regulating_bodies/&lt;pk&gt;/</span></code> e.g
<code class="docutils literal"><span class="pre">/api/facilities/regulating_bodies/07f8302f-042a-4a9c-906b-10d69092b43e/</span></code>.</p>
<p>When registering a new regulating body, you should set the <code class="docutils literal"><span class="pre">name</span></code>,
<code class="docutils literal"><span class="pre">abbreviation</span></code> and <code class="docutils literal"><span class="pre">regulation_verb</span></code> fields. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;A newly legislated regulator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;abbreviation&quot;</span><span class="o">:</span> <span class="s2">&quot;ANLR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;regulation_verb&quot;</span><span class="o">:</span> <span class="s2">&quot;Gazettment&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="regulating-body-contacts">
<h3>Regulating body contacts<a class="headerlink" href="#regulating-body-contacts" title="Permalink to this headline">¶</a></h3>
<p>After creating a regulating body, one or more contacts can be associated with
it by <code class="docutils literal"><span class="pre">POST``ing</span> <span class="pre">to</span> <span class="pre">``/api/facilities/regulating_body_contacts/</span></code> the <code class="docutils literal"><span class="pre">id</span></code>
of the <code class="docutils literal"><span class="pre">regulating_body</span></code> ( returned by the API after creating the body or
retrieved from the relevant list / detail endpoint ) and the <code class="docutils literal"><span class="pre">id</span></code> of the
<code class="docutils literal"><span class="pre">contact</span></code> ( obtained in a similar manner ).</p>
<p>Suppose that the <code class="docutils literal"><span class="pre">id</span></code> for the newly created regulating body is
<code class="docutils literal"><span class="pre">5763a053-668e-4ca7-bab4-cda3da396453</span></code>. Suppose also that we have just
created a contact with <code class="docutils literal"><span class="pre">id</span></code> <code class="docutils literal"><span class="pre">7dd62ab9-94c2-48d6-a10f-d903bd57acd5</span></code>.</p>
<p>We can associate that contact and the regulating body by <code class="docutils literal"><span class="pre">POST``ing</span> <span class="pre">to</span>
<span class="pre">``/api/facilities/regulating_body_contacts/</span></code> the following payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;regulating_body&quot;</span><span class="o">:</span> <span class="s2">&quot;5763a053-668e-4ca7-bab4-cda3da396453&quot;</span><span class="p">,</span>
    <span class="s2">&quot;contact&quot;</span><span class="o">:</span> <span class="s2">&quot;7dd62ab9-94c2-48d6-a10f-d903bd57acd5&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The regulating body contacts that already exist can be listed by issuing a
<code class="docutils literal"><span class="pre">GET</span></code> to <code class="docutils literal"><span class="pre">/api/facilities/regulating_body_contacts/</span></code>. If you would like to
filter those that belong to a known regulating body, use a <code class="docutils literal"><span class="pre">regulating_body</span></code>
query parameter, with the <code class="docutils literal"><span class="pre">id</span></code> of the regulating body as the filter value
e.g <code class="docutils literal"><span class="pre">/api/facilities/regulating_body_contacts/?regulating_body=5763a053-668e-4ca7-bab4-cda3da396453</span></code>. You could also filter the regulating body contacts using the <code class="docutils literal"><span class="pre">id</span></code> of a
known contact, although the use cases for that are more limited.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This section introduces some patterns that will recur in this API:</p>
<ul class="simple">
<li>The use of filters: the list APIs are filterable by most of the
fields that they list. You can explore this further in the <a class="reference internal" href="07_sandbox.html"><em>The API sandbox</em></a>.</li>
<li>The use of <strong>explicit join tables</strong> for many to many relationships.</li>
</ul>
<p class="last">The <code class="docutils literal"><span class="pre">regulating_body_contact</span></code> resource that is the subject of this
section is an example. That is a deliberate choice - we find that, even
though it makes the API clients do a little more work, it leads to more
<strong>reliable</strong> APIs. In RESTful APIs, nested serialization / deserialization
is a massive pain. We&#8217;d rather not deal with it.</p>
</div>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Supply Chain 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, sci devs.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>